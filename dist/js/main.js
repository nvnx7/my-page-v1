const wrapper=document.getElementById("wrapper"),SWIPE_THRESHOLD=15,carousel=document.querySelector("#skill-items-container"),nextBtn=document.querySelector("#nav-btn-next"),prevBtn=document.querySelector("#nav-btn-prev"),peekGradient=document.querySelector("#fade-gradient"),navDots=document.querySelector("#nav-dots"),navBar=document.getElementById("navbar"),navExpandBtn=document.getElementById("nav-expand"),navCollapseBtn=document.getElementById("nav-collapse"),navBtnList=document.getElementById("nav-list"),handleTouchStart=t=>{console.log("handleTouchStart"),xStart=t.touches[0].clientX,yStart=t.touches[0].clientY},handleTouchMove=t=>{if(!xStart||!yStart)return;console.log("handleTouchMove");const e=t.touches[0].clientX,n=t.touches[0].clientY,o=xStart-e,r=yStart-n;Math.abs(r)>Math.abs(o)+15&&(r>0?(console.log("Up swipe"),scrollToNext()):(console.log("Down swipe"),scrollToPrev()),xStart=null,yStart=null)},handleTouchEnd=t=>{if(console.log("handleTouchEnd"),!xStart||!yStart)return;const e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,o=xStart-e,r=yStart-n;if(console.log("xDiff: "+o),Math.abs(o)>Math.abs(r)+15){if("skill-items-container"!=t.currentTarget.id)return;o>0?scrollToNextItem():scrollToPrevItem(),xStart=null,yStart=null}};let xStart=null,yStart=null;window.addEventListener("wheel",t=>{t.deltaY<0&&currentSectionIdx>0?scrollToPrev():t.deltaY>0&&currentSectionIdx<sections.length-1&&scrollToNext()}),wrapper.addEventListener("touchstart",handleTouchStart),wrapper.addEventListener("touchmove",handleTouchMove),carousel.addEventListener("touchstart",handleTouchStart),carousel.addEventListener("touchend",handleTouchEnd),peekGradient.addEventListener("click",t=>{scrollToNextItem()}),nextBtn.addEventListener("click",t=>{scrollToNextItem()}),prevBtn.addEventListener("click",t=>{scrollToPrevItem()}),navDots.addEventListener("click",t=>{scrollToItem(t.target)}),navExpandBtn.addEventListener("click",t=>{t.target&&expandNavBar()}),navCollapseBtn.addEventListener("click",t=>{t.target&&collapseNavBar()}),navBtnList.addEventListener("click",t=>{if("A"==t.target.tagName){t.preventDefault(),collapseNavBar(),scrollToSection(sections.indexOf(t.target.getAttribute("href")))}});const NAV_COLLAPSED="nav-collapsed",NAV_EXPANDED="nav-expanded";let isNavBarCollapsed=!0;function expandNavBar(){navBar.classList.remove(NAV_COLLAPSED),navBar.classList.add(NAV_EXPANDED),toggleNavBtn()}function collapseNavBar(){navBar.classList.remove(NAV_EXPANDED),navBar.classList.add(NAV_COLLAPSED),toggleNavBtn()}function toggleNavBtn(){isNavBarCollapsed?(navExpandBtn.style.display="none",navCollapseBtn.style.display="block"):(navCollapseBtn.style.display="none",navExpandBtn.style.display="block"),isNavBarCollapsed=!isNavBarCollapsed}const Section=Object.freeze({Intro:"#intro",About:"#about",Skills:"#skills",Connect:"#connect"});let currentSectionIdx=0;const sections=[Section.Intro,Section.About,Section.Skills,Section.Connect];function scrollToNext(){isStillScrolling(currentSectionIdx)||currentSectionIdx<sections.length-1&&(currentSectionIdx++,document.querySelector(sections[currentSectionIdx]).scrollIntoView(!0))}function scrollToPrev(){isStillScrolling(currentSectionIdx)||currentSectionIdx>0&&(currentSectionIdx--,document.querySelector(sections[currentSectionIdx]).scrollIntoView(!0))}function scrollToSection(t){isStillScrolling(currentSectionIdx)||(currentSectionIdx=t,document.querySelector(sections[currentSectionIdx]).scrollIntoView(!0))}function isStillScrolling(t){return 0!=getElementY(sections[t])}function getRelativeY(t){return document.querySelector(t).offsetTop}function getElementY(t){return document.querySelector(t).getBoundingClientRect().top}function reset(){currentSectionIdx=0,document.getElementById("intro").scrollIntoView(!0)}const navDotToggleClass="nav-dot-current";let currentIdx=0;const items=Array.from(carousel.getElementsByClassName("skill-item")).slice(0,-1),navDotsList=Array.from(document.getElementById("nav-dots").getElementsByClassName("nav-dot"));function scrollToNextItem(){currentIdx>=items.length-1||(navDotsList[currentIdx].classList.remove("nav-dot-current"),currentIdx++,carousel.scrollTo(items[currentIdx].offsetLeft,0),navDotsList[currentIdx].classList.add("nav-dot-current"))}function scrollToPrevItem(){currentIdx<=0||(navDotsList[currentIdx].classList.remove("nav-dot-current"),currentIdx--,carousel.scrollTo(items[currentIdx].offsetLeft,0),navDotsList[currentIdx].classList.add("nav-dot-current"))}function scrollToItem(t){const e=navDotsList.indexOf(t);-1!=e&&(navDotsList[currentIdx].classList.remove("nav-dot-current"),currentIdx=e,carousel.scrollTo(items[currentIdx].offsetLeft,0),navDotsList[currentIdx].classList.add("nav-dot-current"))}function getRelativeX(t){return document.querySelector(t).offsetLeft}